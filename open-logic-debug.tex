% open-logic-dev.tex
% master file to produce debug version
% includes all references, markup, etc.

\documentclass{memoir}

% Lives in main directory
\newcommand*{\olpath}{.}

\usepackage{subfiles}
\usepackage[footinfo]{gitinfo}

\input{\olpath/sty/open-logic.sty}
\input{\olpath/sty/open-logic-dev.sty}

% needed for absolute paths of included files and linksto GitHub
\RequirePackage[abspath]{currfile}
\RequirePackage{xstring}

% all files included with \subfile will have filename & link to GitHub printed

\makeatletter \renewcommand{\skip@preamble}{%
  \let\document\relax\let\enddocument\relax%
  \newenvironment{document}{\noindent\hrulefill\par{\hfill\color{red}\StrBehind*{\currfileabspath}{open-logic/}[\thisfile]\href{https://github.com/OpenLogicProject/OpenLogic/blob/master/\thisfile}{\texttt{\thisfile}}}}{}%
  \renewcommand{\documentclass}[2][subfiles]{}} \makeatother

\renewcommand*{\beforepartskip}{}
\renewcommand*{\afterpartskip}{}
\renewcommand*{\clearforchapter}{}
\nopartblankpage

\title{Open Logic Text}
\author{Open Logic Project}
\date{Revision\gitVtags: \gitAbbrevHash{} (\gitAuthorDate)}

\begin{document}

% include complete text
\olimport{open-logic}

\end{document}

