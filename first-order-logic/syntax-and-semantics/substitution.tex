% Part: first-order-logic
% Chapter: syntax-and-semantics
% Section: substitution

\documentclass[../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{fol}{syn}{sub}

\olsection{Substitution}

\begin{defn}[Substitution in a term]
We define $\Subst{s}{t}{x}$, the result of \emph{substituting} $t$
for every occurrence of~$x$ in $s$, recursively:
\begin{enumerate}
\item \indcase{s}{c}{$\Subst{\indfrm}{t}{x}$ is just $s$.}

\item \indcase{s}{y}{$\Subst{\indfrm}{t}{x}$ is also just~$s$,
  provided $y$ is a variable other than~$x$.}

\item \indcase{s}{x}{$\Subst{\indfrm}{t}{x}$ is~$t$.}

\item\indcase{s}{\Atom{f}{t_1, \dots, t_n}}{$\Subst{\indfrmp}{t}{x}$ is
  $\Atom{f}{\Subst{t_1}{t}{x}, \dots, \Subst{t_n}{t}{x}}$.}
\end{enumerate}
\end{defn}

\begin{defn}[Substitution in a !!{formula}]
If $!A$ is a !!{formula}, $x$ is a !!{variable}, and $t$ is a term,
$\Subst{!A}{t}{x}$ is the result of substituting $t$ for all free
occurrences of $x$ in~$!A$. 
\begin{enumerate}
\item \indcase{!A}{\Atom{P}{t_1,\dots,
    t_n}}{$\Subst{\indfrm}{t}{x}$ is $\Atom{P}{\Subst{t_1}{t}{x},
    \dots, \Subst{t_n}{t}{x}}$.}

\item \indcase{!A}{t_1 = t_2}{$\Subst{\indfrmp}{t}{x}$ is
  $\Subst{t_1}{t}{x} = \Subst{t_2}{t}{x}$.}

\tagitem{prvNot}{\indcase{!A}{\lnot !B}{$\Subst{\indfrmp}{t}{x}$ is
    $\lnot \Subst{!B}{t}{x}$.}}

\tagitem{prvAnd}{\indcase{!A}{!B \land
    !C}{$\Subst{\indfrmp}{t}{x}$ is $(\Subst{!B}{t}{x} \land
    \Subst{!C}{t}{x})$.}}

\tagitem{prvOr}{\indcase{!A}{!B \lor
    !C}{$\Subst{\indfrmp}{t}{x}$ is $(\Subst{!B}{t}{x} \lor
    \Subst{!C}{t}{x})$.}}

\tagitem{prvIf}{\indcase{!A}{!B \lif
    !C}{$\Subst{\indfrmp}{t}{x}$ is $(\Subst{!B}{t}{x} \lif
    \Subst{!C}{t}{x})$.}}

\tagitem{prvIff}{\indcase{!A}{!B \liff
    !C}{$\Subst{\indfrmp}{t}{x}$ is $(\Subst{!B}{t}{x} \liff
    \Subst{!C}{t}{x})$.}}

\tagitem{prvAll}{
\indcase{!A}{\lforall[y][!B]}{$\Subst{\indfrmp}{t}{x}$
    is $\lforall[y][\Subst{!B}{t}{x}]$, provided $y$ is a variable
    other than $x$.}
\item\indcase{!A}{\lforall[x][!B]}{$\Subst{\indfrmp}{t}{x}$
    is just $\indfrm$.}}

\tagitem{prvEx}{
\indcase{!A}{\lexists[y][!B]}{$\Subst{\indfrmp}{t}{x}$
    is $\lexists[y][\Subst{!B}{t}{x}]$, provided $y$ is a variable
    other than $x$.}
\item\indcase{!A}{\lexists[x][!B]}{$\Subst{\indfrmp}{t}{x}$
    is just $\indfrm$.}}

\end{enumerate}
\end{defn}

Note that substitution may be vacuous: If $x$ does not occur in $!A$
at all, then $\Subst{!A}{t}{x}$ is just~$!A$.

\begin{defn}
A term~$t$ is !!{free for} $x$ in $!A$ if none of the free occurrences
of~$x$ in $!A$ occur in the scope of a quantifier that binds a
variable in~$t$.
\end{defn}

\end{document}
